# DiffDash

A command-line tool to generate Git commit messages using AI.

## Features

* Generates Git commit messages in natural English
* Configuration using standard API provider environment variables
* Select from a choice of LLM models (although the default works best)
* Can compare messages generated from all the models in parallel
* Adds a footer to the generated commit messages
* Options to disable or approve various stages of the process
* Uses the Vercel AI SDK

## Installation from npmjs.com

```bash
npm install -g @johnowennixon/diffdash
```

## Installation from GitHub

```bash
# Clone the repository
git clone https://github.com/johnowennixon/diffdash.git
cd diffdash

# Install dependencies
pnpm install

# Build the project
pnpm build

# Make binaries executable
npm link
```

## API Keys

DiffDash requires at least one API keys for an LLM provider. These must be provided as environment variables:

```bash
# For OpenRouter
export OPENROUTER_API_KEY=your-api-key

# For OpenAI
export OPENAI_API_KEY=your-api-key

# For Anthropic
export ANTHROPIC_API_KEY=your-api-key

# For Google Gemini
export GEMINI_API_KEY=your-api-key
```

## Usage

```bash
# Basic usage (uses defaults)
diffdash

# Display commit messages generated by all models
diffdash --compare

# Automatically stage all changes, but still prompt for commit and push
diffdash --auto-add

# Automatically stage and commit changes, but still prompt for push
diffdash --auto-add --auto-commit

# Fully automated workflow (stage, commit, and push without prompts)
diffdash --auto-add --auto-commit --auto-push

# Generate message for already staged changes only (won't stage any new changes)
diffdash --disable-add

# Skip displaying the status of staged files before commit
diffdash --disable-status

# Generate message and commit, but don't push or prompt to push
diffdash --disable-push

# Generate message but don't commit (exit after displaying the message)
diffdash --disable-commit

# Combine auto and disable options (auto-commit but don't allow adding or pushing)
diffdash --disable-add --auto-commit --disable-push

# Skip git hooks when pushing
diffdash --no-verify

# Use the fallback LLM model
diffdash --llm-fallback

# Specify the LLM model
diffdash --llm-model claude-3.5-sonnet

# Debug options
diffdash --debug-llm-inputs --debug-llm-outputs
```

## Command Line Arguments

All command-line arguments are optional.

| Argument | Description |
|--------|-------------|
| `--version` | show program version information and exit |
| `--compare` | compare the generated messages from all models - but do not commit |
| `--auto-add` | automatically stage all changes without prompting |
| `--auto-commit` | automatically commit changes without confirmation |
| `--auto-push` | automatically push changes after commit without prompting |
| `--disable-add` | disable adding unstaged changes (takes priority over --auto-add) |
| `--disable-status` | disable listing the staged files before commit |
| `--disable-commit` | disable committing changes after displaying the generated message |
| `--disable-push` | disable pushing changes (takes priority over --auto-push) |
| `--no-verify` | bypass git hooks when pushing with the --no-verify flag |
| `--llm-model` | choose the LLM model by name (the default is normally best) |
| `--llm-fallback` | use the fallback LLM model |
| `--llm-direct` | prefer to access the LLM direct rather than using an aggregator |
| `--debug-llm-inputs` | show prompts sent to the LLM |
| `--debug-llm-outputs` | show raw outputs from the LLM |

## Development

```bash
# Lint the code
pnpm lint

# Fix formatting issues
pnpm run fix:biome

# Build the project
pnpm build
```

## License

0BSD
